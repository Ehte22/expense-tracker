import{a as ue,d as he,g as fe,j as xe}from"./chunk-KH3LKA6G.js";import{d as ye}from"./chunk-PASJKOGX.js";import{a as W,b as f,c as X,d as Z,e as ee,h as te,i as ie,j as ne,k as re,l as ae,m as oe,n as se,o as le,p as pe,t as de,v as me}from"./chunk-5R37I7NS.js";import{a as ce}from"./chunk-SRJCEGCT.js";import{a as _e}from"./chunk-VH5XKJT3.js";import{a as ge,b as ve,c as Ee}from"./chunk-D3FARQ3Q.js";import{Aa as q,Ba as j,Ca as U,Da as R,Db as N,Ea as t,Fa as i,Fb as H,Ga as d,Gb as J,Hb as Q,Ib as M,Ja as S,La as c,Ma as h,N as D,S as y,T as k,Ua as n,Ub as w,Va as m,Wa as F,X as C,Y as b,Za as $,_a as T,ab as _,bb as E,cb as G,f as L,ia as s,ja as x,lb as A,mb as I,nb as P,pb as B,rb as z,sb as K,ta as g,tb as Y,va as p}from"./chunk-JAQO5MGZ.js";var Fe=()=>["create"],Ae=o=>({"table-danger":o});function Ie(o,u){if(o&1){let e=S();t(0,"button",35),c("click",function(){C(e);let a=h().$implicit,l=h();return b(l.viewExpense(a._id))}),d(1,"i",36),t(2,"span",37),n(3,"View"),i()()}}function Pe(o,u){if(o&1){let e=S();t(0,"button",35),c("click",function(){C(e);let a=h().$implicit,l=h();return b(l.editExpense(a._id))}),d(1,"i",38),t(2,"span",37),n(3,"Edit"),i()()}}function Be(o,u){if(o&1){let e=S();t(0,"span",39),c("click",function(){C(e);let a=h().$implicit,l=h();return b(l.deleteExpense(a._id))}),n(1,"Delete"),i()}}function Ne(o,u){if(o&1&&(t(0,"tr",27)(1,"td"),n(2),i(),t(3,"td"),n(4),_(5,"titlecase"),i(),t(6,"td"),n(7),_(8,"titlecase"),i(),t(9,"td"),n(10),i(),t(11,"td"),n(12),i(),t(13,"td")(14,"div",9)(15,"button",28),d(16,"i",29),i(),t(17,"ul",12)(18,"li",30),g(19,Ie,4,0,"button",31),i(),t(20,"li",30),g(21,Pe,4,0,"button",31),i(),t(22,"li",30)(23,"button",32),d(24,"i",33),g(25,Be,2,0,"span",34),i()()()()()()),o&2){let e=u.$implicit,r=u.index;p("ngClass",T(13,Ae,e.deletedAt!==null)),s(2),m(r+1),s(2),m(E(5,9,e.type)),s(3),m(E(8,11,e.title)),s(3),m(e.desc),s(2),m(e.amount),s(7),p("ngIf",e._id),s(2),p("ngIf",e._id),s(4),p("ngIf",e._id)}}var we=(()=>{class o{constructor(e,r){this.store=e,this.router=r,this.isDeleted=new L,this.getAllExpenses=[],this.searchExpense="",this.filterByStatus="all",this.currentPage=1,this.limit=5,this.total=0,this.pages=[],this.sortByOrder="desc"}ngOnInit(){this.getExpenses(),this.isDeleted=this.store.select(e=>e.expense.isDeleted),this.isDeleted.subscribe(e=>{e&&this.getExpenses()})}handleChange(e){let r=e.target;r.type==="search"?this.searchExpense=r.value.toLowerCase():r.name==="status"&&(this.filterByStatus=r.value.toLowerCase()),this.currentPage=1,this.getExpenses()}sortByDate(e){this.sortByOrder=e,this.getExpenses()}getExpenses(){this.store.dispatch(he({page:this.currentPage,limit:this.limit,searchExpense:this.searchExpense,sortByOrder:this.sortByOrder,filterByStatus:this.filterByStatus})),this.store.select(e=>e.expense).subscribe(e=>{this.getAllExpenses=e.expenses,this.total=e.total,this.currentPage=e.page})}deleteExpense(e){this.store.dispatch(xe({id:e})),this.getExpenses()}editExpense(e){this.router.navigate([`expenses/update/${e}`])}viewExpense(e){this.router.navigate([`expenses/view/${e}`])}onPageChange(e){this.currentPage=e,this.getExpenses()}static{this.\u0275fac=function(r){return new(r||o)(x(w),x(H))}}static{this.\u0275cmp=y({type:o,selectors:[["app-expenses-list"]],decls:58,vars:6,consts:[[1,"container"],[1,"d-flex","justify-content-between","mt-5"],[1,"search-container"],["type","search","placeholder","Search by type",1,"form-control","me-3",3,"input"],[1,"fa-solid","fa-magnifying-glass"],[1,""],["routerLinkActive","router-link-active",1,"btn","btn-primary",3,"routerLink"],[1,"row","mt-4"],[1,"col-lg-4","col-sm-6"],[1,"dropdown"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown",1,"dropdown-toggle","dropdown_btn","no-arrow","fs-4"],[1,"fa-solid","fa-sort","text-primary"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"d-flex","gap-3"],["type","radio","id","all","name","status","value","all","checked","",1,"form-check-input","me-2",3,"input"],["for","all",1,"form-label"],["type","radio","id","active","name","status","value","null",1,"form-check-input","me-2",3,"input"],["for","active",1,"form-label"],["type","radio","id","inactive","name","status","value","date",1,"form-check-input","me-2",3,"input"],["for","inactive",1,"form-label"],[1,"col"],[1,"table-responsive","card","shadow"],[1,"table"],[1,"table-dark"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"pageChange","currentPage","limit","total"],[3,"ngClass"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown",1,"dropdown-toggle","dropdown_btn","no-arrow"],[1,"fa-solid","fa-ellipsis-vertical"],[1,"dropdown-item"],["class","border-0 bg-transparent",3,"click",4,"ngIf"],[1,"border-0","bg-transparent"],[1,"fa-solid","fa-trash","text-danger"],["class","ms-2",3,"click",4,"ngIf"],[1,"border-0","bg-transparent",3,"click"],[1,"fa-solid","fa-eye","text-success"],[1,"ms-2"],[1,"fa-solid","fa-pen-to-square","text-primary"],[1,"ms-2",3,"click"]],template:function(r,a){r&1&&(d(0,"app-header"),t(1,"div",0)(2,"div",1)(3,"div",2)(4,"input",3),c("input",function(v){return a.handleChange(v)}),i(),d(5,"i",4),i(),t(6,"div",5)(7,"button",6),n(8,"+Add Expense"),i()()(),t(9,"div",7)(10,"div",8)(11,"h3"),n(12,"Sort By Date"),i(),t(13,"div",9)(14,"button",10),d(15,"i",11),i(),t(16,"ul",12)(17,"li",13),c("click",function(){return a.sortByDate("asc")}),n(18,"Ascending"),i(),t(19,"li",13),c("click",function(){return a.sortByDate("desc")}),n(20,"Descending"),i()()()(),t(21,"div",8)(22,"h3"),n(23,"Filter By Status"),i(),t(24,"div",14)(25,"div")(26,"input",15),c("input",function(v){return a.handleChange(v)}),i(),t(27,"label",16),n(28,"All"),i()(),t(29,"div")(30,"input",17),c("input",function(v){return a.handleChange(v)}),i(),t(31,"label",18),n(32,"Active"),i()(),t(33,"div")(34,"input",19),c("input",function(v){return a.handleChange(v)}),i(),t(35,"label",20),n(36,"InActive"),i()()()()(),t(37,"div",7)(38,"div",21)(39,"div",22)(40,"table",23)(41,"thead")(42,"tr",24)(43,"th"),n(44,"#"),i(),t(45,"th"),n(46,"Type"),i(),t(47,"th"),n(48,"Title"),i(),t(49,"th"),n(50,"Description"),i(),t(51,"th"),n(52,"Amount"),i(),t(53,"th"),n(54,"Actions"),i()()(),t(55,"tbody"),g(56,Ne,26,15,"tr",25),i()(),t(57,"app-pagination",26),c("pageChange",function(v){return a.onPageChange(v)}),i()()()()()),r&2&&(s(7),p("routerLink",$(5,Fe)),s(49),p("ngForOf",a.getAllExpenses),s(),p("currentPage",a.currentPage)("limit",a.limit)("total",a.total))},dependencies:[A,I,P,J,Q,ge,ve,B],styles:[".dropdown_btn[_ngcontent-%COMP%]{background:none!important;border:none}.no-arrow[_ngcontent-%COMP%]:after{display:none}.inp-search[_ngcontent-%COMP%]{max-width:300px}.search-container[_ngcontent-%COMP%]{position:relative;width:fit-content;width:220px}.search-container[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%]{padding-right:30px}.search-container[_ngcontent-%COMP%]   .fa-magnifying-glass[_ngcontent-%COMP%]{font-size:20px;position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#aaa}.fs-18[_ngcontent-%COMP%]{font-size:18px}@media screen and (min-width: 620px){.search-container[_ngcontent-%COMP%]{position:relative;width:fit-content;width:400px}}"]})}}return o})();var Te=o=>({"is-invalid":o});function Oe(o,u){if(o&1&&(t(0,"option",34),n(1),i()),o&2){let e=u.$implicit;p("value",e.type),s(),F("",e.type," ")}}function Me(o,u){if(o&1){let e=S();t(0,"div",35)(1,"div",36)(2,"div",25)(3,"label",37),n(4,"Tag Key:"),i(),d(5,"input",38),t(6,"small",18),n(7,"*Tag key is required"),i()(),t(8,"div",25)(9,"label",39),n(10,"Tag Value:"),i(),d(11,"input",40),t(12,"small",18),n(13,"*Tag value is required"),i()(),t(14,"div",41)(15,"button",42),c("click",function(){let a=C(e).index,l=h();return b(l.removeTag(a))}),n(16,"Delete Tag"),i()()()()}if(o&2){let e,r,a=u.index,l=h();p("formGroupName",a),s(5),p("ngClass",T(3,Te,((e=l.tags.controls[a].get("key"))==null?null:e.touched)&&((e=l.tags.controls[a].get("key"))==null?null:e.errors))),s(6),p("ngClass",T(5,Te,((r=l.tags.controls[a].get("value"))==null?null:r.touched)&&((r=l.tags.controls[a].get("value"))==null?null:r.errors)))}}var V=(()=>{class o{constructor(e,r,a,l){this.store=e,this.formBuilder=r,this.toastr=a,this.activeRoute=l,this.isEdit=!1,this.getAllTypes=[],this.expenseForm=new ee({}),this.currentPage=1,this.limit=5,this.total=0,this.searchType="",this.sortByOrder="desc",this.maxDate="",this.minDate=""}ngOnInit(){this.expenseForm=this.formBuilder.group({type:["",f.required],title:["",f.required],desc:["",f.required],date:["",f.required],amount:["",f.required],tags:this.formBuilder.array([this.formBuilder.group({key:["",f.required],value:["",f.required]})])});let e=new Date;this.maxDate=this.formatDate(e);let r=new Date;r.setDate(e.getDate()-60),this.minDate=this.formatDate(r),this.getTypes(),this.editExpense()}formatDate(e){let r=e.getFullYear(),a=("0"+(e.getMonth()+1)).slice(-2),l=("0"+e.getDate()).slice(-2);return`${r}-${a}-${l}`}getTypes(){this.store.dispatch(ye({isFetchAll:!1,page:this.currentPage,limit:this.limit,searchType:this.searchType,sortByOrder:this.sortByOrder})),this.store.select(e=>e.type).subscribe(e=>{this.getAllTypes=e.types,this.total=e.total,this.currentPage=e.page})}onSubmit(){this.expenseForm.valid?this.selectedExpense?(this.isEdit=!0,this.updateExpense()):(this.isEdit=!1,this.addExpense()):(this.expenseForm.markAllAsTouched(),this.toastr.error("All fields are requied","Error",{timeOut:5e3,closeButton:!0,progressBar:!0}))}get tags(){return this.expenseForm.get("tags")}removeTag(e){this.tags.removeAt(e)}addTag(){this.tags.push(this.formBuilder.group({key:["",f.required],value:["",f.required]}))}validateField(e){return this.expenseForm.get(e)?.touched&&this.expenseForm.get(e)?.errors?"is-invalid":""}addExpense(){this.store.dispatch(ue({expenseData:this.expenseForm.value}))}editExpense(){let e=this.activeRoute.snapshot.params?.id;this.store.select(r=>r.expense).subscribe(r=>{this.selectedExpense=r.expenses.find(a=>a._id===e)}),this.selectedExpense&&(this.isEdit=!0,this.expenseForm.patchValue({type:this.selectedExpense.type,title:this.selectedExpense.title,desc:this.selectedExpense.desc,date:this.selectedExpense.date,amount:this.selectedExpense.amount}),this.setTags(this.selectedExpense?.tags||[]))}setTags(e){let r=this.expenseForm.get("tags");r.clear(),e.forEach(a=>{r.push(this.formBuilder.group({key:[a.key,f.required],value:[a.value,f.required]}))})}updateExpense(){this.selectedExpense&&this.selectedExpense._id&&this.store.dispatch(fe({id:this.selectedExpense?._id,selectedExpense:this.expenseForm.value}))}previousPage(){this.currentPage>1&&(this.currentPage--,this.getTypes())}nextPage(){this.currentPage<this.total/this.limit&&(this.currentPage++,this.getTypes())}static{this.\u0275fac=function(r){return new(r||o)(x(w),x(de),x(ce),x(N))}}static{this.\u0275cmp=y({type:o,selectors:[["app-create-update"]],decls:57,vars:13,consts:[[1,"container"],[1,"d-flex","justify-content-center"],[1,"mt-5"],[1,"card","shadow","p-3"],[1,"text-center","mt-3"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"d-flex","justify-content-between"],["for","type",1,"form-label"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-chevron-left"],["type","button",1,"btn","btn-outline-primary","btn-sm"],[1,"bi","bi-chevron-right"],["id","type","formControlName","type",1,"form-select",3,"ngClass"],["hidden","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"invalid-feedback"],[1,"my-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","placeholder","Enter Title",1,"form-control",3,"ngClass"],["for","desc",1,"form-label"],["type","text","id","desc","formControlName","desc","placeholder","Enter Description",1,"form-control",3,"ngClass"],[1,"row","my-3"],[1,"col-6"],["for","date",1,"form-label"],["type","date","id","date","formControlName","date",1,"form-control",3,"ngClass","min","max"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter Amout",1,"form-control",3,"ngClass"],["formArrayName","tags"],["class","my-2 border rounded-1 mt-3 p-3",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-dark",3,"click"],[1,"btn","btn-primary","w-100","mt-3","btn-lg"],[3,"value"],[1,"my-2","border","rounded-1","mt-3","p-3",3,"formGroupName"],[1,"row"],["for","key",1,"form-label"],["type","text","id","key","formControlName","key","placeholder","Enter Tag key",1,"form-control",3,"ngClass"],["for","value",1,"form-label"],["type","number","id","value","formControlName","value","placeholder","Enter Tag Value",1,"form-control",3,"ngClass"],[1,"mt-3"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(r,a){r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),n(5),i(),t(6,"div",5)(7,"form",6),c("ngSubmit",function(){return a.onSubmit()}),t(8,"div",7)(9,"div",8)(10,"label",9),n(11,"Expense Type:"),i(),t(12,"div")(13,"div",10)(14,"button",11),c("click",function(){return a.previousPage()}),d(15,"i",12),i(),t(16,"button",13),n(17),i(),t(18,"button",11),c("click",function(){return a.nextPage()}),d(19,"i",14),i()()()(),t(20,"select",15)(21,"option",16),n(22,"Select Type"),i(),g(23,Oe,2,2,"option",17),i(),t(24,"small",18),n(25,"*Expense type is a required field"),i()(),t(26,"div",19)(27,"label",20),n(28,"Title:"),i(),d(29,"input",21),t(30,"small",18),n(31,"*Title is a required field"),i()(),t(32,"div",19)(33,"label",22),n(34,"Description:"),i(),d(35,"input",23),t(36,"small",18),n(37,"*Description type is a required field"),i()(),t(38,"div",24)(39,"div",25)(40,"label",26),n(41,"Date:"),i(),d(42,"input",27),t(43,"small",18),n(44,"*Date type is a required field"),i()(),t(45,"div",25)(46,"label",28),n(47,"Amount:"),i(),d(48,"input",29),t(49,"small",18),n(50,"*Amount type is a required field"),i()()(),t(51,"div",30),g(52,Me,17,7,"div",31),t(53,"button",32),c("click",function(){return a.addTag()}),n(54,"Add Tag"),i()(),t(55,"button",33),n(56),i()()()()()()()),r&2&&(s(5),m(a.isEdit?"Update Expense":"Add Expenses"),s(2),p("formGroup",a.expenseForm),s(10),F(" ",a.currentPage," "),s(3),p("ngClass",a.validateField("type")),s(3),p("ngForOf",a.getAllTypes),s(6),p("ngClass",a.validateField("title")),s(6),p("ngClass",a.validateField("desc")),s(7),p("ngClass",a.validateField("date"))("min",a.minDate)("max",a.maxDate),s(6),p("ngClass",a.validateField("amount")),s(4),p("ngForOf",a.tags.controls),s(4),F(" ",a.isEdit?"Update Expense":"Add Expense"," "))},dependencies:[A,I,te,le,pe,W,ie,se,X,Z,ne,oe,re,ae]})}}return o})();function Ve(o,u){if(o&1&&(t(0,"tr")(1,"td"),n(2),i(),t(3,"td"),n(4),i(),t(5,"td"),n(6),i()()),o&2){let e=u.$implicit,r=u.$index;s(2),m(r+1),s(2),m(e.key),s(2),m(e.value)}}function Le(o,u){if(o&1&&U(0,Ve,7,3,"tr",null,j),o&2){let e=h(2);R(e.expenseDetail.tags)}}function qe(o,u){o&1&&(t(0,"tr")(1,"td",8),n(2,"No data found"),i()())}function je(o,u){if(o&1&&(t(0,"div",3)(1,"h3",4),n(2),_(3,"titlecase"),i(),t(4,"h4",4),n(5,"Type:- "),t(6,"span"),n(7),_(8,"titlecase"),i()(),t(9,"h4",4),n(10,"Amount:- "),t(11,"span"),n(12),_(13,"currency"),i()(),t(14,"h5",4),d(15,"i",5),n(16,"\xA0Date Created\xA0:- "),t(17,"span"),n(18),_(19,"date"),i()(),t(20,"h5",4),d(21,"i",5),n(22,"\xA0Date Updated\xA0:- "),t(23,"span"),n(24),_(25,"date"),i()(),t(26,"h5",4),n(27," Description:- "),t(28,"span"),n(29),_(30,"titlecase"),i()(),t(31,"h5",6),n(32,"List Of All Tags"),i(),t(33,"table",7)(34,"thead")(35,"tr")(36,"th"),n(37,"#"),i(),t(38,"th"),n(39,"Key"),i(),t(40,"th"),n(41,"Value"),i()()(),t(42,"tbody"),g(43,Le,2,0)(44,qe,3,0),i()()()),o&2){let e=h();s(2),m(E(3,7,e.expenseDetail.title)),s(5),m(E(8,9,e.expenseDetail.type)),s(5),m(G(13,11,e.expenseDetail.amount,"INR")),s(6),m(E(19,14,e.expenseDetail.createdAt)),s(6),m(E(25,16,e.expenseDetail.updatedAt)),s(5),m(E(30,18,e.expenseDetail.desc)),s(14),q(43,e.expenseDetail.tags&&e.expenseDetail.tags.length>0?43:44)}}var De=(()=>{class o{constructor(e,r){this.activeRoute=e,this.store=r}ngOnInit(){let e=this.activeRoute.snapshot.params?.id;this.store.select(r=>r.expense).subscribe(r=>{this.expenseDetail=r.expenses.find(a=>a._id===e),console.log(this.expenseDetail)})}static{this.\u0275fac=function(r){return new(r||o)(x(N),x(w))}}static{this.\u0275cmp=y({type:o,selectors:[["app-view"]],decls:3,vars:1,consts:[[1,"container"],[1,"card","shadow","col-lg-5","mt-5","mx-auto"],["class","card-body text-center",4,"ngIf"],[1,"card-body","text-center"],[1,"my-2"],[1,"fa-solid","fa-calendar-days","calendar"],[1,"mt-3"],[1,"table","table-bordered"],["colspan","3"]],template:function(r,a){r&1&&(t(0,"div",0)(1,"div",1),g(2,je,45,20,"div",2),i()()),r&2&&(s(2),p("ngIf",a.expenseDetail))},dependencies:[P,B,K,z]})}}return o})();var Ue=[{path:"",canActivate:[_e],children:[{path:"",component:we,title:"Expenses List"},{path:"create",component:V,title:"Create Expense"},{path:"update/:id",component:V,title:"Update Expense"},{path:"view/:id",component:De,title:"View"}]}],ke=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=k({type:o})}static{this.\u0275inj=D({imports:[M.forChild(Ue),M]})}}return o})();var xt=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=k({type:o})}static{this.\u0275inj=D({imports:[Y,ke,me,Ee]})}}return o})();export{xt as ExpensesModule};
